if (self.CavalryLogger) { CavalryLogger.start_js(["O\/wm8"]); }

__d("PageIcebreakerEventLocation",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({WWW_CHAT_NULL_STATE:"www_chat_null_state",IOS_NULL_STATE_IN_THREAD:"ios_null_state_in_thread",IOS_NULL_STATE_NEW_LAYOUT:"ios_null_state_new_layout",ANDROID_WELCOME_PAGE:"android_welcome_page",ANDROID_CHAT_NULL_STATE:"android_chat_null_state",CLICK_TO_MESSENGER_ADS:"click_to_messenger_ads",CUSTOMER_CHAT_PLUGIN:"customer_chat_plugin",PAGES__HOME_TAB__ICEBREAKERS_UNIT:"pages__home_tab__icebreakers_unit",PAGES__ONE_WAY_COMPOSER:"pages__one_way_composer",ANDROID_MESSENGER:"android_messenger",IOS_MESSENGER:"ios_messenger",UNKNOWN:"unknown",ADMIN_SETTINGS:"admin_settings",AUTOMATED_TEST:"automated_test",INTERNAL_OR_DEBUGGING:"internal_or_debugging",LOCAL_SEARCH_SERVICES:"local_search_services",MLEX_CUSTOMER_FEEDBACK:"mlex_customer_feedback"})}),null);
__d("MercuryPagesGreetingContainer.react",["cx","invariant","ix","CurrentUser","Grid.react","Image.react","MercuryIDs","MercuryMessageActions","MercuryMessageObject","MercurySourceType","MessagingTag","MessengerDiscoveryEntryPoint","MessengerDiscoveryEntryPointsLoggingHelper","MessengerEnvironment","PageIcebreakerEventLocation","PagesLogger","PagesLoggerEventEnum","PagesLoggerEventTargetEnum","PagesMessagingMercuryChatTabActions","PagesMessagingMercuryChatTabStore","React","StoreAndPropBasedStateMixin","fbglyph","ifRequired"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("MercuryMessageActions").get(),k=b("Grid.react").GridItem;a=b("React").PropTypes;var l=function(a){__p&&__p();var c=[];b("ifRequired")("FantaAppStore",function(d){d=d.getState().tabGroup.tabs.get(b("MercuryIDs").getThreadIDFromUserID(a.pageID));c=[b("MessagingTag").ONE_CLICK_MESSAGE];d&&d.entryPoint&&d.entryPoint[0]&&Object.values(b("MessengerDiscoveryEntryPoint")).indexOf(d.entryPoint[0])!==-1&&c.push(b("MessengerDiscoveryEntryPointsLoggingHelper").getEntryPointsLoggingTagStr([d.entryPoint[0]]))});var d=function(){var d=new(b("MercuryMessageObject"))(b("CurrentUser").getID());j.send(d.constructUserGeneratedMessageObject(a.message,b("MercurySourceType").TITAN_WEB,a.threadID,null,null,c));b("PagesLogger").log(a.pageID,b("PagesLoggerEventEnum").CLICK,b("PagesLoggerEventTargetEnum").MESSENGER_ONE_CLICK_MESSAGE_BUTTON,b("PageIcebreakerEventLocation").WWW_CHAT_NULL_STATE,["pages_messaging_www","PagesComms","OneClick"],{message:a.messageType,position:a.position})};return b("React").createElement("a",{className:"_7bl6",href:"#",onClick:d},a.message)};c=b("React").createClass({displayName:"MercuryPagesGreetingContainer",propTypes:{threadID:a.string.isRequired},mixins:[b("StoreAndPropBasedStateMixin")(b("PagesMessagingMercuryChatTabStore"))],statics:{calculateState:function(a){a=b("PagesMessagingMercuryChatTabStore").getStateByThread(a.threadID);return{shouldShowGreetingMessage:a.pagesGreetingShouldShow&&a.pagesGreetingContent&&a.pagesGreetingContent.length>0,shouldShowIcebreakers:a.icebreakers&&Object.keys(a.icebreakers).length>0,greetingMessage:a.pagesGreetingContent,pageResponsiveness:a.pageResponsiveness,connectionContext:a.connectionContext,pageOnlineMessage:a.pageOnlineMessage}}},getInitialState:function(){return{loggedButtonImpressions:[]}},componentDidMount:function(){b("PagesMessagingMercuryChatTabActions").requestGreetingConfig(this.props.threadID)},render:function(){var a;this.state.shouldShowIcebreakers&&(a=this._renderIcebreakers());return b("React").createElement("div",null,b("React").createElement(b("Grid.react"),{alignv:"top",className:(b("MessengerEnvironment").messengerui?"_7bl7":"")+(b("MessengerEnvironment").messengerui?"":" _7bkq"),cols:2,spacing:"_7bkr"},this._renderTopRow(),this._renderSubRow()),a)},_renderIcebreakers:function(){var a=b("PagesMessagingMercuryChatTabStore").getStateByThread(this.props.threadID).icebreakers;a!==void 0&&a!==null||h(0,2536);var c=b("MercuryIDs").getUserIDFromThreadID(this.props.threadID);c!==void 0&&c!==null||h(0,2537);a=a.map(function(a,d){var e=a.messageKey;this._maybeLogOneClickMessageImpression(c,e,d);return b("React").createElement(k,{key:e},b("React").createElement(l,{message:String(a.message),messageType:e,pageID:c,position:d,threadID:this.props.threadID}))}.bind(this));return b("React").createElement(b("Grid.react"),{alignh:"center",className:"_7bks",cols:1},a)},_renderTopRow:function(){if(this.state.pageOnlineMessage)return this._renderOnlineMessage();return this.state.pageResponsiveness?this._renderPageResponsiveness():null},_renderSubRow:function(){return this.state.shouldShowGreetingMessage?[b("React").createElement(k,{className:"_7bl8",key:"messenger_greeting_icon"},b("React").createElement(b("Image.react"),{src:i("124738")})),b("React").createElement(k,{className:"_7bl9",key:"messenger_greeting_text"},this.state.greetingMessage)]:this._renderConnectionContext()},_renderOnlineMessage:function(){return[b("React").createElement(k,{className:"_7bla",key:"online_indicator_icon"},b("React").createElement(b("Image.react"),{src:i("311943")})),b("React").createElement(k,{className:"_7blb",key:"online_indicator_text"},this.state.pageOnlineMessage)]},_renderPageResponsiveness:function(){return[b("React").createElement(k,{key:"page_responsiveness_icon"},b("React").createElement(b("Image.react"),{src:i("124279")})),b("React").createElement(k,{className:"_7blb",key:"page_responsiveness_text"},this.state.pageResponsiveness)]},_renderConnectionContext:function(){return!this.state.connectionContext?null:[b("React").createElement(k,{className:"_7bl8",key:"connection_context_icon"},b("React").createElement(b("Image.react"),{src:i("124577")})),b("React").createElement(k,{className:"_7bl9",key:"connection_context_text"},this.state.connectionContext)]},_maybeLogOneClickMessageImpression:function(a,c,d){var e=this.state.loggedButtonImpressions;if(e.indexOf(c)>=0)return;b("PagesLogger").log(a,b("PagesLoggerEventEnum").IMPRESSION,b("PagesLoggerEventTargetEnum").MESSENGER_ONE_CLICK_MESSAGE_BUTTON,b("PageIcebreakerEventLocation").WWW_CHAT_NULL_STATE,["pages_messaging_www","PagesComms","OneClick"],{position:d,message:c});e.push(c);this.setState({loggedButtonImpressions:e})}});e.exports=c}),null);